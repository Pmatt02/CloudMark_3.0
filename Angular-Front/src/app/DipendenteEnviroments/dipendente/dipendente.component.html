<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css"/>

<h2 class="text-dark">Dipendenti</h2>

<div>

  <div id="box">

    <div class="bg-white">

      <table class="table mb-0">

        <thead class = "bg-primary">

          <tr>
            <th scope="col">ID</th>
            <th scope="col">Nome dipendente</th>
            <th scope="col">Cognome dipendente</th>
            <th scope="col">CF</th>
            <th scope="col">Iban</th>
            <th scope="col">ID tipo contratto</th>
            <th scope="col">Email</th>
            <th scope="col">Telefono</th>
            <th scope="col">Data di nascita</th>
            <th scope="col"></th>
          </tr>

        </thead>

        <tbody>

          <tr *ngFor="let d of dipendente$ | async">
            <td style = "font-weight: 700;">{{ d.id_dipendente }}</td>
            <td>{{ d.nome }}</td>
            <td>{{ d.cognome }}</td>
            <td>{{ d.cf }}</td>
            <td>{{ d.iban }}</td>
            <td>{{ d.id_tipo_contratto }}</td>
            <td>{{ d.email }}</td>
            <td>{{ d.telefono }}</td>
            <td>{{ d.data_nascita }}</td>

            <div class="d-flex justify-content-center">

              <button class="btn btn-outline-warning m-2" routerLink="/dipendenteUpdate/{{ d.id_dipendente }}" *ngIf="permissions" >
                <i class="bi bi-pencil-square"></i>
              </button>

              <button class="btn btn-danger m-2" (click) = "openModal(reqModal)" *ngIf="permissions" >
                <i class="bi bi-trash"></i>
              </button>

              <ng-template #reqModal let-modal>

                <div class="modal-header">
          
                  <h5 class="modal-title">Attenzione</h5>
          
                </div>
          
                <div class="modal-body">
          
                  <p>Sicuro di voler procedere?</p>
          
                </div>
          
                <div class="modal-footer">
          
                  <button type="button" class="btn btn-secondary" (click) = "modal.close()">Close</button>
                  <button type="button" class="btn btn-danger" (click)="deleteEmployee(d.id_dipendente, idaz)" (click) = "modal.close()" routerLink="/">Elimina</button>
          
                </div>
          
              </ng-template>

            </div>

          </tr>

        </tbody>

      </table>

    </div>

  </div>

  <br/>

  <button type="button" class="btn btn-outline-primary m-2" (click)="downloadFile()">
    <i class="bi bi-file-earmark-arrow-down">CSV</i>
  </button>

  <button type="button" class="btn btn-success m-2" routerLink="/addDipendente/{{ idaz }}" *ngIf="permissions" >
    <i class="bi bi-person-add"> Aggiungi</i>
  </button>

</div>
